var querys=require('./js/querys').querys;


/**
 * Define the base of our language object */
function language(name,tablename,querys){
    this.name=name;
    this.tablename=tablename;
    this.querys=querys;
}

var tw=new language('taiwanese','Ctw', querys['taiwanese']);
var cn=new language('chinese','Cmainland',querys['chinese']);
var jp=new language('japanese','Cjp',querys['japanese']);


/* Export an array to add new properties to our language objects */
module.exports={
    temparray:[tw,cn,jp]
};


/* Circular dependency */
var indexes=require("./js/indexes");

/* Return our objects with all their needed properties */
module.exports = {

    init: function(callback) {
        indexes(function(err, result) {
            if (err) {
                callback(err,null);
            }
            else {
                tw.indexes = result[tw.name];
                cn.indexes = result[cn.name];
                jp.indexes = result[jp.name];
                callback(null, {
                    'tw': tw,
                    'cn': cn,
                    'jp': jp
                });
            }
        });
    }
};


